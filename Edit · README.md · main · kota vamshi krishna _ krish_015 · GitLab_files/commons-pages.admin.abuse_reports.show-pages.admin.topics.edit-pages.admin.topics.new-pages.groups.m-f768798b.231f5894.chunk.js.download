(this.webpackJsonp=this.webpackJsonp||[]).push([[5],{"0Yau":function(e,i,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mergeRequestReviewers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fullPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"workspace"},name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"fullPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"issuable"},name:{kind:"Name",value:"mergeRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"User"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"UserAvailability"},directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeRequestInteraction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canMerge"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"canUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewState"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewersApplicableApprovalRules"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"userPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"adminMergeRequest"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:737}};n.loc.source={body:'#import "~/graphql_shared/fragments/user.fragment.graphql"\n#import "~/graphql_shared/fragments/user_availability.fragment.graphql"\n#import "ee_else_ce/sidebar/queries/reviewer_applicable_approval_rules.fragment.graphql"\n\nquery mergeRequestReviewers($fullPath: ID!, $iid: String!) {\n  workspace: project(fullPath: $fullPath) {\n    id\n    issuable: mergeRequest(iid: $iid) {\n      id\n      reviewers {\n        nodes {\n          ...User\n          ...UserAvailability\n          mergeRequestInteraction {\n            canMerge\n            canUpdate\n            approved\n            reviewState\n\n            ...ReviewersApplicableApprovalRules\n          }\n        }\n      }\n      userPermissions {\n        adminMergeRequest\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!r[i]&&(r[i]=!0,!0)}))}n.definitions=n.definitions.concat(a(t("aBoS").definitions)),n.definitions=n.definitions.concat(a(t("6u3F").definitions)),n.definitions=n.definitions.concat(a(t("Wiak").definitions));var s={};function l(e,i){for(var t=0;t<e.definitions.length;t++){var n=e.definitions[t];if(n.name&&n.name.value==i)return n}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,t){if("FragmentSpread"===i.kind)t.add(i.name.value);else if("VariableDefinition"===i.kind){var n=i.type;"NamedType"===n.kind&&t.add(n.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,t)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,t)})),i.definitions&&i.definitions.forEach((function(i){e(i,t)}))}(e,i),s[e.name.value]=i}})),e.exports=n,e.exports.mergeRequestReviewers=function(e,i){var t={kind:e.kind,definitions:[l(e,i)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var n=s[i]||new Set,r=new Set,a=new Set;for(n.forEach((function(e){a.add(e)}));a.size>0;){var o=a;a=new Set,o.forEach((function(e){r.has(e)||(r.add(e),(s[e]||new Set).forEach((function(e){a.add(e)})))}))}return r.forEach((function(i){var n=l(e,i);n&&t.definitions.push(n)})),t}(n,"mergeRequestReviewers")},"6u3F":function(e,i){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"UserAvailability"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"availability"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:70}};t.loc.source={body:"fragment UserAvailability on User {\n  status {\n    availability\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function r(e,i){for(var t=0;t<e.definitions.length;t++){var n=e.definitions[t];if(n.name&&n.name.value==i)return n}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,t){if("FragmentSpread"===i.kind)t.add(i.name.value);else if("VariableDefinition"===i.kind){var n=i.type;"NamedType"===n.kind&&t.add(n.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,t)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,t)})),i.definitions&&i.definitions.forEach((function(i){e(i,t)}))}(e,i),n[e.name.value]=i}})),e.exports=t,e.exports.UserAvailability=function(e,i){var t={kind:e.kind,definitions:[r(e,i)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var a=n[i]||new Set,s=new Set,l=new Set;for(a.forEach((function(e){l.add(e)}));l.size>0;){var o=l;l=new Set,o.forEach((function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach((function(e){l.add(e)})))}))}return s.forEach((function(i){var n=r(e,i);n&&t.definitions.push(n)})),t}(t,"UserAvailability")},"8M/8":function(e,i,t){"use strict";function n(){document.dispatchEvent(new CustomEvent("userCounts:fetch"))}t.d(i,"a",(function(){return n}))},"C41/":function(e,i,t){"use strict";t.d(i,"b",(function(){return K}));t("3UXl"),t("iyoE"),t("UezY"),t("z6RN"),t("hG7+");var n=t("ewH8"),r=t("onSc"),a=t("4lAS"),s=t("jlnU"),l=t("AxUD"),o=t("/lV4"),d=t("FxFN"),u=t("sHIo"),c=t("8M/8"),v=t("N50s"),m=t("GuZl"),p=t("1OWu"),f=t("0Yau"),g=t.n(f),h={apollo:{reviewers:{query:g.a,variables(){return{fullPath:this.projectPath,iid:this.issuableIid}},update:function(e){var i;return(null===(i=e.workspace)||void 0===i||null===(i=i.issuable)||void 0===i||null===(i=i.reviewers)||void 0===i?void 0:i.nodes)||[]},skip(){return!this.open}}},components:{GlDrawer:v.a,ApprovalSummary:function(){return t.e(4).then(t.bind(null,"4b03"))},ApprovalRulesWrapper:function(){return t.e(4).then(t.bind(null,"4b03"))}},inject:["projectPath","issuableIid"],props:{open:{type:Boolean,required:!0}},data:()=>({reviewers:[]}),computed:{getDrawerHeaderHeight(){return this.open?Object(p.d)():"0"},loadingReviewers(){return this.$apollo.queries.reviewers.loading}},DRAWER_Z_INDEX:m.h},w=t("tBpV"),k=Object(w.a)(h,(function(){var e=this,i=e._self._c;return i("gl-drawer",{attrs:{"header-height":e.getDrawerHeaderHeight,"z-index":e.$options.DRAWER_Z_INDEX,open:e.open},on:{close:function(i){return e.$emit("close")}},scopedSlots:e._u([{key:"title",fn:function(){return[i("h4",{staticClass:"gl-my-0"},[e._v(e._s(e.__("Assign reviewers")))])]},proxy:!0},{key:"header",fn:function(){return[i("approval-summary",{staticClass:"gl-mt-3"})]},proxy:!0}])},[e._v(" "),e._v(" "),i("approval-rules-wrapper",{attrs:{reviewers:e.reviewers},on:{"request-review":function(i){return e.$emit("request-review",i)},"remove-reviewer":function(i){return e.$emit("remove-reviewer",i)}}})],1)}),[],!1,null,null,null).exports,b=t("Or2z"),R=t("u/6O"),S=t.n(R),y=t("jz1Q"),N=t("FkSe"),q=t("z1xw"),_=t("Tmea"),A=t.n(_),D=(t("v2fZ"),t("B++/"),t("47t/"),t("crTv")),E=t("tbP8"),I=t("s1D3"),O=t("4wgn"),j=t("lwG1"),U=t.n(j),P=t("LgEk"),T=t("tj6P"),F=t.n(T),x={inject:["projectPath","issuableIid"],props:{selectedReviewers:{type:Array,required:!0}},data:()=>({loading:!1}),methods:{async updateReviewers(){this.loading=!0,await this.$apollo.mutate({mutation:F.a,variables:{reviewerUsernames:this.selectedReviewers,projectPath:this.projectPath,iid:this.issuableIid}}),this.loading=!1}},render(){return this.$scopedSlots.default({loading:this.loading,updateReviewers:this.updateReviewers})}},$=Object(w.a)(x,void 0,void 0,!1,null,null,null).exports,V=t("pvU3"),C={apollo:{userPermissions:{query:t.n(V).a,variables(){return{fullPath:this.projectPath,iid:this.issuableIid}},update:function(e){var i;return(null===(i=e.project)||void 0===i||null===(i=i.mergeRequest)||void 0===i?void 0:i.userPermissions)||{}}}},components:{GlCollapsibleListbox:D.a,GlAvatar:E.a,GlIcon:I.a,UpdateReviewers:$,InviteMembersTrigger:P.a},inject:["projectPath","issuableId","issuableIid","directlyInviteMembers"],props:{users:{type:Array,required:!1,default:function(){return[]}},selectedReviewers:{type:Array,required:!1,default:function(){return[]}}},data(){return{search:"",searching:!1,fetchedUsers:[],currentSelectedReviewers:this.selectedReviewers.map((function(e){return e.username})),userPermissions:{}}},computed:{mappedUsers(){var e=this;const i=[];let t;return this.selectedReviewers.length&&!this.search&&i.push({text:Object(o.a)("Reviewers"),options:this.selectedReviewers.map((function(i){return e.mapUser(i)}))}),t=this.fetchedUsers.length?this.fetchedUsers:this.users,i.push({textSrOnly:!0,text:Object(o.a)("Users"),options:t.filter((function(i){return!!e.search||!e.selectedReviewers.find((function({id:e}){return i.id===e}))})).map((function(i){return e.mapUser(i)}))}),i}},watch:{selectedReviewers(e){this.currentSelectedReviewers=e.map((function(e){return e.username}))}},created(){var e=this;this.debouncedFetchAutocompleteUsers=A()((function(i){return e.fetchAutocompleteUsers(i)}),m.g)},methods:{mapUser:e=>({value:e.username,text:e.name,secondaryText:"@"+e.username,...e}),shownDropdown(){this.users.length||this.fetchedUsers.length||this.fetchAutocompleteUsers()},async fetchAutocompleteUsers(e=""){this.search=e,this.searching=!0;const{data:{workspace:{users:i=[]}}}=await this.$apollo.query({query:U.a,variables:{search:e,fullPath:this.projectPath,mergeRequestId:Object(d.c)(O.w,this.issuableId)}});this.fetchedUsers=i,this.searching=!1},removeAllReviewers(){this.currentSelectedReviewers=[]}},i18n:{selectReviewer:Object(o.a)("Select reviewer"),unassign:Object(o.a)("Unassign")}},M=Object(w.a)(C,(function(){var e=this,i=e._self._c;return e.userPermissions.adminMergeRequest?i("update-reviewers",{attrs:{"selected-reviewers":e.currentSelectedReviewers},scopedSlots:e._u([{key:"default",fn:function({loading:t,updateReviewers:n}){return[i("gl-collapsible-listbox",{staticClass:"reviewers-dropdown",attrs:{"toggle-text":e.__("Edit"),"toggle-class":"!gl-text-primary","header-text":e.$options.i18n.selectReviewer,"reset-button-label":e.$options.i18n.unassign,category:"tertiary","no-caret":"",size:"small",searchable:"",multiple:"",placement:"bottom-end","is-check-centered":"",items:e.mappedUsers,loading:t,searching:e.searching},on:{search:e.debouncedFetchAutocompleteUsers,shown:e.shownDropdown,hidden:n,reset:e.removeAllReviewers},scopedSlots:e._u([{key:"list-item",fn:function({item:t}){return[i("span",{staticClass:"gl-flex gl-items-center"},[i("div",{staticClass:"gl-relative gl-mr-3"},[i("gl-avatar",{attrs:{size:32,src:t.avatarUrl,"entity-name":t.value}}),e._v(" "),t.mergeRequestInteraction&&!t.mergeRequestInteraction.canMerge?i("gl-icon",{staticClass:"reviewer-merge-icon",attrs:{name:"warning-solid","aria-hidden":"true"}}):e._e()],1),e._v(" "),i("span",{staticClass:"gl-flex gl-flex-col"},[i("span",{staticClass:"gl-whitespace-nowrap gl-font-bold"},[e._v(e._s(t.text))]),e._v(" "),i("span",{staticClass:"gl-text-subtle"},[e._v(" "+e._s(t.secondaryText))])])])]}},e.directlyInviteMembers?{key:"footer",fn:function(){return[i("div",{staticClass:"gl-flex gl-flex-col gl-border-t-1 gl-border-t-dropdown !gl-p-2 !gl-pt-0 gl-border-t-solid"},[i("invite-members-trigger",{staticClass:"!gl-mt-2 !gl-justify-start",attrs:{"trigger-element":"button","display-text":e.__("Invite members"),"trigger-source":"merge_request_reviewers_dropdown",category:"tertiary",block:""}})],1)]},proxy:!0}:null],null,!0),model:{value:e.currentSelectedReviewers,callback:function(i){e.currentSelectedReviewers=i},expression:"currentSelectedReviewers"}})]}}],null,!1,1470083810)}):e._e()}),[],!1,null,null,null).exports,G={name:"ReviewerTitle",components:{GlLoadingIcon:N.a,GlButton:a.a,ReviewerDropdown:M},directives:{Tooltip:q.a},mixins:[Object(u.a)()],props:{loading:{type:Boolean,required:!1,default:!1},numberOfReviewers:{type:Number,required:!0},editable:{type:Boolean,required:!0},reviewers:{type:Array,required:!1,default:function(){return[]}}},computed:{reviewerTitle(){const e=this.numberOfReviewers;return Object(o.f)("Reviewer","%d Reviewers",e)}},i18n:{changeReviewer:Object(o.g)("MergeRequest|Change reviewer")}},z=Object(w.a)(G,(function(){var e=this,i=e._self._c;return i("div",{staticClass:"hide-collapsed gl-flex gl-items-center gl-gap-2 gl-font-bold gl-leading-20 gl-text-gray-900"},[e._v("\n  "+e._s(e.reviewerTitle)+"\n  "),e.loading?i("gl-loading-icon",{staticClass:"align-bottom",attrs:{size:"sm",inline:""}}):e._e(),e._v(" "),e.editable?[e.glFeatures.reviewerAssignDrawer?i("reviewer-dropdown",{staticClass:"gl-ml-auto",attrs:{"selected-reviewers":e.reviewers}}):i("gl-button",{directives:[{name:"tooltip",rawName:"v-tooltip.hover",modifiers:{hover:!0}}],staticClass:"hide-collapsed js-sidebar-dropdown-toggle edit-link gl-float-right gl-ml-auto",attrs:{title:e.$options.i18n.changeReviewer,"data-track-action":"click_edit_button","data-track-label":"right_sidebar","data-track-property":"reviewer","data-testid":"reviewers-edit-button",category:"tertiary",size:"small"}},[e._v("\n      "+e._s(e.__("Edit"))+"\n    ")])]:e._e()],2)}),[],!1,null,null,null).exports,L=(t("RFHG"),t("xuo1"),t("ZzK0"),t("BzOf"),t("MV2A")),B={components:{GlAvatar:E.a,GlIcon:I.a},props:{user:{type:Object,required:!0},imgSize:{type:Number,required:!0}},computed:{reviewerAlt(){return Object(o.h)(Object(o.a)("%{userName}'s avatar"),{userName:this.user.name})},avatarUrl(){return this.user.avatarUrl||this.user.avatar_url||gon.default_avatar_url},hasMergeIcon(){var e;return!(null!==(e=this.user.mergeRequestInteraction)&&void 0!==e&&e.canMerge)}}},W={components:{ReviewerAvatar:Object(w.a)(B,(function(){var e=this._self._c;return e("span",{staticClass:"gl-relative"},[e("gl-avatar",{attrs:{label:this.user.name,src:this.avatarUrl,size:this.imgSize,alt:this.reviewerAlt}}),this._v(" "),this.hasMergeIcon?e("gl-icon",{staticClass:"merge-icon reviewer-merge-icon",attrs:{name:"warning-solid","aria-hidden":"true"}}):this._e()],1)}),[],!1,null,null,null).exports,GlLink:L.a},directives:{GlTooltip:q.a},props:{user:{type:Object,required:!0},rootPath:{type:String,required:!0},issuableType:{type:String,default:l.p,required:!1}},computed:{cannotMerge(){var e;return this.issuableType===l.q&&!(null!==(e=this.user.mergeRequestInteraction)&&void 0!==e&&e.canMerge)},reviewerId(){return Object(d.e)(this.user.id)},reviewerUrl(){return this.user.webUrl}}},Q=Object(w.a)(W,(function(){var e=this,i=e._self._c;return i("gl-link",{staticClass:"js-user-link gl-inline-block !gl-text-inherit hover:!gl-text-blue-800",attrs:{href:e.reviewerUrl,"data-user-id":e.reviewerId,"data-username":e.user.username,"data-cannot-merge":e.cannotMerge,"data-placement":"left"}},[i("span",{staticClass:"gl-flex"},[i("reviewer-avatar",{attrs:{user:e.user,"img-size":24,"issuable-type":e.issuableType}}),e._v(" "),e._t("default",null,{user:e.user})],2)])}),[],!1,null,null,null).exports;const H={APPROVED:{name:"check-circle",class:"gl-text-green-500",title:Object(o.g)("MergeRequest|Reviewer approved changes")},REQUESTED_CHANGES:{name:"error",class:"gl-text-red-500",title:Object(o.g)("MergeRequest|Reviewer requested changes")},REVIEWED:{name:"comment-lines",class:"gl-text-blue-500",title:Object(o.g)("MergeRequest|Reviewer commented")},UNREVIEWED:{name:"dash-circle",title:Object(o.g)("MergeRequest|Awaiting review")},REVIEW_STARTED:{name:"comment-dots",class:"gl-text-gray-500",title:Object(o.g)("MergeRequest|Reviewer started review")}};var Z={i18n:{reRequestReview:Object(o.a)("Re-request review"),removeReviewer:Object(o.g)("MergeRequest|Remove reviewer")},components:{GlButton:a.a,GlIcon:I.a,ReviewerAvatarLink:Q},directives:{GlTooltip:q.a},props:{users:{type:Array,required:!0},rootPath:{type:String,required:!0},issuableType:{type:String,required:!1,default:l.p},isEditable:{type:Boolean,required:!1,default:!1}},data:()=>({showLess:!0,loadingStates:{}}),watch:{users:{handler(e,i){var t=this;this.loadingStates=e.reduce((function(e,i){return{...e,[i.id]:e[i.id]||null}}),this.loadingStates),i&&e.forEach((function(e){const n=i.find((function({id:i}){return i===e.id}));n&&e.mergeRequestInteraction.approved&&!n.mergeRequestInteraction.approved&&t.showApprovalAnimation(e.id)}))},immediate:!0}},methods:{showApprovalAnimation(e){var i=this;this.loadingStates[e]="approved",setTimeout((function(){i.loadingStates[e]=null}),1500)},reviewedButNotApprovedTooltip:e=>Object(o.h)(Object(o.g)("MergeRequest|Reviewed by @%{username} but not yet approved"),e),toggleShowLess(){this.showLess=!this.showLess},reRequestReview(e){this.loadingStates[e]="loading",this.$emit("request-review",{userId:e,callback:this.requestReviewComplete})},removeReviewer(e){var i=this;this.loadingStates[e]="loading",this.$emit("remove-reviewer",{userId:e,done:function(){return i.requestRemovalComplete(e)}})},requestReviewComplete(e,i){var t=this;i?(this.loadingStates[e]="success",setTimeout((function(){t.loadingStates[e]=null}),1500)):this.loadingStates[e]=null},requestRemovalComplete(e){delete this.loadingStates[e]},reviewStateIcon(e){return e.mergeRequestInteraction.approved?{...H.APPROVED,class:[H.APPROVED.class,"approved"===this.loadingStates[e.id]&&"merge-request-approved-icon"]}:H[e.mergeRequestInteraction.reviewState]||H.UNREVIEWED},showRequestReviewButton:e=>!!e.mergeRequestInteraction.approved||!["UNREVIEWED","UNAPPROVED"].includes(e.mergeRequestInteraction.reviewState)},LOADING_STATE:"loading",SUCCESS_STATE:"success"},Y=Object(w.a)(Z,(function(){var e=this,i=e._self._c;return i("div",e._l(e.users,(function(t,n){return i("div",{key:t.id,staticClass:"reviewer-grid gl-mr-2 gl-grid gl-items-center",class:{"gl-mb-3":n!==e.users.length-1},attrs:{"data-testid":"reviewer"}},[i("reviewer-avatar-link",{staticClass:"gl-mr-2 gl-break-anywhere",attrs:{user:t,"root-path":e.rootPath,"issuable-type":e.issuableType,"data-css-area":"user"}},[i("div",{staticClass:"gl-ml-3 gl-grid gl-items-center gl-leading-normal"},[e._v("\n        "+e._s(t.name)+"\n      ")])]),e._v(" "),t.mergeRequestInteraction.canUpdate&&e.showRequestReviewButton(t)?i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.left",modifiers:{left:!0}}],staticClass:"gl-float-right gl-mr-2 !gl-text-gray-500",attrs:{title:e.$options.i18n.reRequestReview,"aria-label":e.$options.i18n.reRequestReview,loading:e.loadingStates[t.id]===e.$options.LOADING_STATE,size:"small",icon:"redo",variant:"link","data-testid":"re-request-button"},on:{click:function(i){return e.reRequestReview(t.id)}}}):e._e(),e._v(" "),i("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.top.viewport",modifiers:{top:!0,viewport:!0}}],staticClass:"gl-float-right gl-my-2 gl-ml-auto gl-shrink-0",class:e.reviewStateIcon(t).class,attrs:{title:e.reviewStateIcon(t).title,"data-testid":"reviewer-state-icon-parent"}},[i("gl-icon",{attrs:{size:e.reviewStateIcon(t).size||16,name:e.reviewStateIcon(t).name,"aria-label":e.reviewStateIcon(t).title,"data-testid":"reviewer-state-icon"}})],1),e._v(" "),e.isEditable?i("span",{staticClass:"gl-inline-flex gl-h-6 gl-w-6"},[i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.top.viewport",modifiers:{top:!0,viewport:!0}}],staticClass:"gl-float-right gl-ml-2 !gl-text-subtle",attrs:{title:e.$options.i18n.removeReviewer,"aria-label":e.$options.i18n.removeReviewer,loading:e.loadingStates[t.id]===e.$options.LOADING_STATE,size:"small",icon:"close",variant:"link","data-testid":"remove-request-button"},on:{click:function(i){return e.removeReviewer(t.id)}}})],1):e._e()],1)})),0)}),[],!1,null,null,null).exports,X={name:"Reviewers",components:{GlButton:a.a,UncollapsedReviewerList:Y},props:{rootPath:{type:String,required:!0},users:{type:Array,required:!0},editable:{type:Boolean,required:!0},issuableType:{type:String,required:!1,default:l.p}},computed:{hasNoUsers(){return!this.users.length},sortedReviewers(){return[...this.users.filter((function(e){var i;return null===(i=e.mergeRequestInteraction)||void 0===i?void 0:i.canMerge})),...this.users.filter((function(e){var i;return!(null!==(i=e.mergeRequestInteraction)&&void 0!==i&&i.canMerge)}))]}},methods:{assignSelf(){this.$emit("assign-self")},requestReview(e){this.$emit("request-review",e)},removeReviewer(e){this.$emit("remove-reviewer",e)}}},J=Object(w.a)(X,(function(){var e=this,i=e._self._c;return i("div",[i("div",{staticClass:"value hide-collapsed"},[e.hasNoUsers?i("span",{staticClass:"no-value gl-flex gl-text-base gl-leading-normal",attrs:{"data-testid":"no-value"}},[e._v("\n      "+e._s(e.__("None"))+"\n      "),e.editable?[e._v("\n        -\n        "),i("gl-button",{staticClass:"gl-ml-2",attrs:{category:"tertiary",variant:"link","data-testid":"assign-yourself"},on:{click:e.assignSelf}},[i("span",{staticClass:"gl-text-gray-500 hover:gl-text-blue-800"},[e._v(e._s(e.__("assign yourself")))])])]:e._e()],2):i("uncollapsed-reviewer-list",{attrs:{users:e.sortedReviewers,"root-path":e.rootPath,"issuable-type":e.issuableType},on:{"request-review":e.requestReview,"remove-reviewer":e.removeReviewer}})],1)])}),[],!1,null,null,null).exports;const K=n.default.observable({issuable:{},loading:!1,initialLoading:!0,drawerOpen:!1});var ee={name:"SidebarReviewers",components:{MountingPortal:r.MountingPortal,GlButton:a.a,ReviewerTitle:z,Reviewers:J,ReviewerDrawer:k,ApprovalSummary:function(){return t.e(4).then(t.bind(null,"4b03"))}},mixins:[Object(u.a)()],props:{mediator:{type:Object,required:!0},field:{type:String,required:!0},issuableType:{type:String,required:!1,default:l.p},issuableIid:{type:String,required:!0},projectPath:{type:String,required:!0}},apollo:{issuable:{query:g.a,variables(){return{iid:this.issuableIid,fullPath:this.projectPath}},update(e){var i;return null===(i=e.workspace)||void 0===i?void 0:i.issuable},result(){this.initialLoading=!1},error(){Object(s.createAlert)({message:Object(o.a)("An error occurred while fetching reviewers.")})},subscribeToMore:{document:()=>S.a,variables(){var e;return{issuableId:null===(e=this.issuable)||void 0===e?void 0:e.id}},skip(){var e;return!(null!==(e=this.issuable)&&void 0!==e&&e.id)},updateQuery(e,{subscriptionData:{data:{mergeRequestReviewersUpdated:i}}}){i&&this.store.setReviewersFromRealtime(i.reviewers.nodes.map((function(e){return{...e,id:Object(d.e)(e.id)}})))}}}},data:()=>K,computed:{relativeUrlRoot(){var e;return null!==(e=gon.relative_url_root)&&void 0!==e?e:""},reviewers(){var e;return(null===(e=this.issuable.reviewers)||void 0===e?void 0:e.nodes)||[]},graphqlFetching(){return this.$apollo.queries.issuable.loading},isLoading(){return this.loading||this.$apollo.queries.issuable.loading},canUpdate(){var e;return(null===(e=this.issuable.userPermissions)||void 0===e?void 0:e.adminMergeRequest)||!1}},created(){this.store=new y.a,this.removeReviewer=this.store.removeReviewer.bind(this.store),this.addReviewer=this.store.addReviewer.bind(this.store),this.removeAllReviewers=this.store.removeAllReviewers.bind(this.store),b.a.$on("sidebar.removeReviewer",this.removeReviewer),b.a.$on("sidebar.addReviewer",this.addReviewer),b.a.$on("sidebar.removeAllReviewers",this.removeAllReviewers),b.a.$on("sidebar.saveReviewers",this.saveReviewers),b.a.$on("sidebar.toggleReviewerDrawer",this.toggleDrawerOpen)},beforeDestroy(){b.a.$off("sidebar.removeReviewer",this.removeReviewer),b.a.$off("sidebar.addReviewer",this.addReviewer),b.a.$off("sidebar.removeAllReviewers",this.removeAllReviewers),b.a.$off("sidebar.saveReviewers",this.saveReviewers),b.a.$off("sidebar.toggleReviewerDrawer",this.toggleDrawerOpen)},methods:{reviewBySelf(){this.$el.parentElement.dispatchEvent(new Event("assignYourself")),this.mediator.addSelfReview(),this.saveReviewers()},saveReviewers(){var e=this;this.loading=!0,this.mediator.saveReviewers(this.field).then((function(){e.loading=!1,Object(c.a)(),e.$apollo.queries.issuable.refetch()})).catch((function(){return e.loading=!1,Object(s.createAlert)({message:Object(o.a)("Error occurred when saving reviewers")})}))},requestReview(e){this.mediator.requestReview(e)},async removeReviewerById(e){const i=Object(d.f)(e.userId)?Object(d.e)(e.userId):e.userId;this.store.reviewers=this.store.reviewers.filter((function(e){return e.id!==i}));try{await this.saveReviewers()}catch(e){Object(s.createAlert)(Object(o.a)("Unable to remove a reviewer at the moment, try again later"),{error:e})}finally{e.done()}},toggleDrawerOpen(e=!this.drawerOpen){this.glFeatures.reviewerAssignDrawer&&(this.drawerOpen=e)}}},ie=Object(w.a)(ee,(function(){var e=this,i=e._self._c;return i("div",[i("reviewer-title",{attrs:{reviewers:e.reviewers,"number-of-reviewers":e.reviewers.length,loading:e.isLoading,editable:e.canUpdate},on:{"request-review":e.requestReview,"remove-reviewer":e.removeReviewerById}}),e._v(" "),e.glFeatures.reviewerAssignDrawer?i("approval-summary",{staticClass:"gl-mb-2",attrs:{"short-text":""}},[i("gl-button",{staticClass:"gl-ml-3",attrs:{size:"small",category:"tertiary",variant:"confirm"},on:{click:function(i){return e.toggleDrawerOpen()}}},[e._v("\n      "+e._s(e.__("Assign"))+"\n    ")])],1):e._e(),e._v(" "),e.initialLoading?e._e():i("reviewers",{staticClass:"gl-pt-2",attrs:{"root-path":e.relativeUrlRoot,users:e.reviewers,editable:e.canUpdate,"issuable-type":e.issuableType},on:{"request-review":e.requestReview,"assign-self":e.reviewBySelf,"remove-reviewer":e.removeReviewerById}}),e._v(" "),e.glFeatures.reviewerAssignDrawer?i("mounting-portal",{attrs:{"mount-to":"#js-reviewer-drawer-portal"}},[i("reviewer-drawer",{attrs:{open:e.drawerOpen},on:{"request-review":e.requestReview,"remove-reviewer":e.removeReviewerById,close:function(i){return e.toggleDrawerOpen(!1)}}})],1):e._e()],1)}),[],!1,null,null,null);i.a=ie.exports},Or2z:function(e,i,t){"use strict";var n=t("7xOh");const r=Object(n.a)();window.emitSidebarEvent=function(...e){return r.$emit(...e)},i.a=r},Wiak:function(e,i){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewersApplicableApprovalRules"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserMergeRequestInteraction"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"approved"},arguments:[],directives:[]}]}}],loc:{start:0,end:108}};t.loc.source={body:"fragment ReviewersApplicableApprovalRules on UserMergeRequestInteraction {\n  # Overriden in EE\n  approved\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function r(e,i){for(var t=0;t<e.definitions.length;t++){var n=e.definitions[t];if(n.name&&n.name.value==i)return n}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,t){if("FragmentSpread"===i.kind)t.add(i.name.value);else if("VariableDefinition"===i.kind){var n=i.type;"NamedType"===n.kind&&t.add(n.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,t)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,t)})),i.definitions&&i.definitions.forEach((function(i){e(i,t)}))}(e,i),n[e.name.value]=i}})),e.exports=t,e.exports.ReviewersApplicableApprovalRules=function(e,i){var t={kind:e.kind,definitions:[r(e,i)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var a=n[i]||new Set,s=new Set,l=new Set;for(a.forEach((function(e){l.add(e)}));l.size>0;){var o=l;l=new Set,o.forEach((function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach((function(e){l.add(e)})))}))}return s.forEach((function(i){var n=r(e,i);n&&t.definitions.push(n)})),t}(t,"ReviewersApplicableApprovalRules")},jz1Q:function(e,i,t){"use strict";t.d(i,"a",(function(){return r}));t("v2fZ"),t("B++/"),t("z6RN"),t("47t/"),t("UezY"),t("hG7+");var n=t("NmEs");class r{constructor(e){return r.singleton||this.initSingleton(e),r.singleton}initSingleton(e){const{currentUser:i,rootPath:t,editable:a,timeTrackingLimitToHours:s}=e;this.currentUser=i,this.rootPath=t,this.editable=Object(n.G)(a),this.timeEstimate=0,this.totalTimeSpent=0,this.humanTimeEstimate="",this.humanTimeSpent="",this.timeTrackingLimitToHours=s,this.assignees=[],this.reviewers=[],this.isFetching={assignees:!0,reviewers:!0},this.isLoading={},this.autocompleteProjects=[],this.moveToProjectId=0,this.isLockDialogOpen=!1,this.participants=[],this.projectEmailsEnabled=!0,this.subscribeDisabledDescription="",this.subscribed=null,this.changing=!1,this.issuableType=e.issuableType,r.singleton=this}setAssigneeData({assignees:e}){this.isFetching.assignees=!1,e&&(this.assignees=e)}setReviewerData({reviewers:e}){this.isFetching.reviewers=!1,e&&(this.reviewers=e)}resetChanging(){this.changing=!1}setTimeTrackingData(e){this.timeEstimate=e.time_estimate,this.totalTimeSpent=e.total_time_spent,this.humanTimeEstimate=e.human_time_estimate,this.humanTotalTimeSpent=e.human_total_time_spent}setFetchingState(e,i){this.isFetching[e]=i}setLoadingState(e,i){this.isLoading[e]=i}addAssignee(e){this.findAssignee(e)||(this.changing=!0,this.assignees.push(e))}addReviewer(e){this.findReviewer(e)||this.reviewers.push(e)}updateAssignee(e,i){const t=this.findAssignee({id:e});t&&(t[i]=!t[i])}updateReviewer(e,i){const t=this.findReviewer({id:e});t&&(t[i]=!t[i])}overwrite(e,i){this[e]=i}findAssignee(e){return this.assignees.find((function({id:i}){return i===e.id}))}findReviewer(e){return this.reviewers.find((function({id:i}){return i===e.id}))}removeAssignee(e){e&&(this.changing=!0,this.assignees=this.assignees.filter((function({id:i}){return i!==e.id})))}removeReviewer(e){e&&(this.reviewers=this.reviewers.filter((function({id:i}){return i!==e.id})))}removeAllAssignees(){this.changing=!0,this.assignees=[]}removeAllReviewers(){this.reviewers=[]}setAssigneesFromRealtime(e){this.assignees=e}setReviewersFromRealtime(e){this.reviewers=e}setAutocompleteProjects(e){this.autocompleteProjects=e}setSubscribedState(e){this.subscribed=e}setMoveToProjectId(e){this.moveToProjectId=e}}},lwG1:function(e,i,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"projectAutocompleteUsersSearchWithMRPermissions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fullPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"mergeRequestId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MergeRequestID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"workspace"},name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"fullPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"users"},name:{kind:"Name",value:"autocompleteUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"search"},value:{kind:"Variable",name:{kind:"Name",value:"search"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"User"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"UserAvailability"},directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeRequestInteraction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"mergeRequestId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canMerge"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:477}};n.loc.source={body:'#import "../fragments/user.fragment.graphql"\n#import "~/graphql_shared/fragments/user_availability.fragment.graphql"\n\nquery projectAutocompleteUsersSearchWithMRPermissions(\n  $search: String!\n  $fullPath: ID!\n  $mergeRequestId: MergeRequestID!\n) {\n  workspace: project(fullPath: $fullPath) {\n    id\n    users: autocompleteUsers(search: $search) {\n      ...User\n      ...UserAvailability\n      mergeRequestInteraction(id: $mergeRequestId) {\n        canMerge\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!r[i]&&(r[i]=!0,!0)}))}n.definitions=n.definitions.concat(a(t("aBoS").definitions)),n.definitions=n.definitions.concat(a(t("6u3F").definitions));var s={};function l(e,i){for(var t=0;t<e.definitions.length;t++){var n=e.definitions[t];if(n.name&&n.name.value==i)return n}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,t){if("FragmentSpread"===i.kind)t.add(i.name.value);else if("VariableDefinition"===i.kind){var n=i.type;"NamedType"===n.kind&&t.add(n.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,t)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,t)})),i.definitions&&i.definitions.forEach((function(i){e(i,t)}))}(e,i),s[e.name.value]=i}})),e.exports=n,e.exports.projectAutocompleteUsersSearchWithMRPermissions=function(e,i){var t={kind:e.kind,definitions:[l(e,i)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var n=s[i]||new Set,r=new Set,a=new Set;for(n.forEach((function(e){a.add(e)}));a.size>0;){var o=a;a=new Set,o.forEach((function(e){r.has(e)||(r.add(e),(s[e]||new Set).forEach((function(e){a.add(e)})))}))}return r.forEach((function(i){var n=l(e,i);n&&t.definitions.push(n)})),t}(n,"projectAutocompleteUsersSearchWithMRPermissions")},pvU3:function(e,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"addReviewerPermissions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fullPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"fullPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"adminMergeRequest"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:211}};t.loc.source={body:"query addReviewerPermissions($fullPath: ID!, $iid: String!) {\n  project(fullPath: $fullPath) {\n    id\n    mergeRequest(iid: $iid) {\n      id\n      userPermissions {\n        adminMergeRequest\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function r(e,i){for(var t=0;t<e.definitions.length;t++){var n=e.definitions[t];if(n.name&&n.name.value==i)return n}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,t){if("FragmentSpread"===i.kind)t.add(i.name.value);else if("VariableDefinition"===i.kind){var n=i.type;"NamedType"===n.kind&&t.add(n.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,t)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,t)})),i.definitions&&i.definitions.forEach((function(i){e(i,t)}))}(e,i),n[e.name.value]=i}})),e.exports=t,e.exports.addReviewerPermissions=function(e,i){var t={kind:e.kind,definitions:[r(e,i)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var a=n[i]||new Set,s=new Set,l=new Set;for(a.forEach((function(e){l.add(e)}));l.size>0;){var o=l;l=new Set,o.forEach((function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach((function(e){l.add(e)})))}))}return s.forEach((function(i){var n=r(e,i);n&&t.definitions.push(n)})),t}(t,"addReviewerPermissions")},tj6P:function(e,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"setReviewers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reviewerUsernames"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeRequestSetReviewers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"projectPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}},{kind:"ObjectField",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}},{kind:"ObjectField",name:{kind:"Name",value:"reviewerUsernames"},value:{kind:"Variable",name:{kind:"Name",value:"reviewerUsernames"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:232}};t.loc.source={body:"mutation setReviewers($projectPath: ID!, $iid: String!, $reviewerUsernames: [String!]!) {\n  mergeRequestSetReviewers(\n    input: { projectPath: $projectPath, iid: $iid, reviewerUsernames: $reviewerUsernames }\n  ) {\n    errors\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function r(e,i){for(var t=0;t<e.definitions.length;t++){var n=e.definitions[t];if(n.name&&n.name.value==i)return n}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,t){if("FragmentSpread"===i.kind)t.add(i.name.value);else if("VariableDefinition"===i.kind){var n=i.type;"NamedType"===n.kind&&t.add(n.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,t)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,t)})),i.definitions&&i.definitions.forEach((function(i){e(i,t)}))}(e,i),n[e.name.value]=i}})),e.exports=t,e.exports.setReviewers=function(e,i){var t={kind:e.kind,definitions:[r(e,i)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var a=n[i]||new Set,s=new Set,l=new Set;for(a.forEach((function(e){l.add(e)}));l.size>0;){var o=l;l=new Set,o.forEach((function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach((function(e){l.add(e)})))}))}return s.forEach((function(i){var n=r(e,i);n&&t.definitions.push(n)})),t}(t,"setReviewers")},"u/6O":function(e,i,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"subscription",name:{kind:"Name",value:"mergeRequestReviewersUpdated"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"issuableId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"IssuableID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeRequestReviewersUpdated"},arguments:[{kind:"Argument",name:{kind:"Name",value:"issuableId"},value:{kind:"Variable",name:{kind:"Name",value:"issuableId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MergeRequest"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"User"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"UserAvailability"},directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeRequestInteraction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canMerge"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"canUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewState"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewersApplicableApprovalRules"},directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:681}};n.loc.source={body:'#import "~/graphql_shared/fragments/user.fragment.graphql"\n#import "~/graphql_shared/fragments/user_availability.fragment.graphql"\n#import "ee_else_ce/sidebar/queries/reviewer_applicable_approval_rules.fragment.graphql"\n\nsubscription mergeRequestReviewersUpdated($issuableId: IssuableID!) {\n  mergeRequestReviewersUpdated(issuableId: $issuableId) {\n    ... on MergeRequest {\n      id\n      reviewers {\n        nodes {\n          ...User\n          ...UserAvailability\n          mergeRequestInteraction {\n            canMerge\n            canUpdate\n            approved\n            reviewState\n\n            ...ReviewersApplicableApprovalRules\n          }\n        }\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!r[i]&&(r[i]=!0,!0)}))}n.definitions=n.definitions.concat(a(t("aBoS").definitions)),n.definitions=n.definitions.concat(a(t("6u3F").definitions)),n.definitions=n.definitions.concat(a(t("Wiak").definitions));var s={};function l(e,i){for(var t=0;t<e.definitions.length;t++){var n=e.definitions[t];if(n.name&&n.name.value==i)return n}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,t){if("FragmentSpread"===i.kind)t.add(i.name.value);else if("VariableDefinition"===i.kind){var n=i.type;"NamedType"===n.kind&&t.add(n.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,t)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,t)})),i.definitions&&i.definitions.forEach((function(i){e(i,t)}))}(e,i),s[e.name.value]=i}})),e.exports=n,e.exports.mergeRequestReviewersUpdated=function(e,i){var t={kind:e.kind,definitions:[l(e,i)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var n=s[i]||new Set,r=new Set,a=new Set;for(n.forEach((function(e){a.add(e)}));a.size>0;){var o=a;a=new Set,o.forEach((function(e){r.has(e)||(r.add(e),(s[e]||new Set).forEach((function(e){a.add(e)})))}))}return r.forEach((function(i){var n=l(e,i);n&&t.definitions.push(n)})),t}(n,"mergeRequestReviewersUpdated")}}]);
//# sourceMappingURL=commons-pages.admin.abuse_reports.show-pages.admin.topics.edit-pages.admin.topics.new-pages.groups.m-f768798b.231f5894.chunk.js.map